# =========================================================
# 1. CONFIGURACION BASICA DE SPRING BOOT
# =========================================================
spring.application.name=fincasdpts
server.port=8080

# =========================================================
# 2. CONFIGURACION DE LA BASE DE DATOS (POSTGRESQL - DOCKER)
# =========================================================
# URL de conexion: apunta al servicio 'db' en docker-compose
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://db:5432/fincasdptls}

# Lo mismo para usuario y contraseña
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:user}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:Admin123}

# =========================================================
# 3. CONFIGURACION DE JPA / HIBERNATE
# =========================================================
# Generacion de DDL: 'update' mantiene los datos pero actualiza el esquema.
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
# CLAVE: Deferir (posponer) la inicializacion del script de datos hasta que
# Hibernate haya creado todas las tablas (DDL).
spring.jpa.defer-datasource-initialization=true

# =========================================================
# 4. CONFIGURACION DE INICIALIZACION DE DATOS (CLAVE PARA init.sql)
# =========================================================
# Modo de inicializacion SQL: siempre fuerza la ejecucion.
spring.sql.init.mode=always
# Ubicacion del script SQL para la carga de datos.
spring.sql.init.data-locations=classpath:init.sql